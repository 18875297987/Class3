<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!--edge浏览器H5兼容设置-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--360浏览器H5兼容设置-->
    <meta name="renderer" content="webkit"/>
    <title>学子商城</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--导入核心文件-->
    <script src="../bootstrap3/js/holder.js"></script>
    <link href="../bootstrap3/css/bootstrap.css" rel="stylesheet" type="text/css">
    <script src="../bootstrap3/jquery-1.9.1.min.js"></script>
    <script src="../bootstrap3/js/bootstrap.js"></script>
    <!-- 字体图标 -->
    <link rel="stylesheet" href="../bootstrap3/font-awesome-4.7.0/css/font-awesome.css"/>
    <link rel="stylesheet" type="text/css" href="../css/top.css"/>
    <link rel="stylesheet" type="text/css" href="../css/index.css"/>
    <link rel="stylesheet" type="text/css" href="../css/layout.css"/>
    <link rel="stylesheet" type="text/css" href="../css/reg.css"/>
    <link rel="stylesheet" type="text/css" href="../css/footer.css"/>
</head>
<body>
<div id="app">
    <!--头部-->
    <header class="header">
        <img src="../images/index/stumalllogo.png" alt=""/>
        <span class="pull-right"><small>欢迎访问</small><b>学子商城</b></span>
    </header>
    <!--主体-->
    <div class="container mycontent text-left">
        <!--透明层 -->
        <div class="regDiv">
            <p>新用户注册</p>
            <!--表单开始-->
            <form id="form-reg" class="form-horizontal" role="form">
                <!--用户名-->
                <div class="form-group">
                    <label class="col-md-3 control-label">名字：</label>
                    <div class="col-md-8">
                        <input name="username" type="text" class="form-control" placeholder="请输入用户名"
                               v-model="user.username">
                    </div>
                </div>
                <!--密码-->
                <div class="form-group">
                    <label class="col-md-3 control-label"> 密码：</label>
                    <div class="col-md-8">
                        <input name="password" type="text" class="form-control" placeholder="请输入密码"
                               v-model="user.password">
                    </div>
                </div>
                <!--确认密码-->
                <div class="form-group">
                    <label class="col-md-3 control-label"> 确认密码：</label>
                    <div class="col-md-8">
                        <input type="text" class="form-control" placeholder="请再次输入密码" v-model="rePassword">
                    </div>
                </div>
                <!--提交按钮-->
                <div class="form-group">
                    <label class="col-md-3 control-label"></label>
                    <div class="col-md-8">
                        <input id="btn-reg" class="btn btn-primary" type="button" value="立即注册" @click="reg()"/>
                        <span class="pull-right"><small>已经有账号？</small><a href="login.html">登录</a></span>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!--页脚开始-->
    <footer class="footer">
        <!-- 品质保障，私人定制等-->
        <div class="text-center rights container">
            <div class="col-md-offset-2 col-md-2">
                <span class="fa fa-thumbs-o-up"></span>
                <p>品质保障</p>
            </div>
            <div class="col-md-2">
                <span class="fa fa-address-card-o"></span>
                <p>私人订制</p>
            </div>
            <div class="col-md-2">
                <span class="fa fa-graduation-cap"></span>
                <p>学生特供</p>
            </div>
            <div class="col-md-2">
                <span class="fa fa-bitcoin"></span>
                <p>专属特权</p>
            </div>
        </div>
        <!--联系我们、下载客户端等-->
        <div class="container beforeBottom">
            <div class="col-md-offset-1 col-md-3">
                <div><img src="../images/index/stumalllogo.png" alt="" class="footLogo"/></div>
                <div><img src="../images/index/footerFont.png" alt=""/></div>
            </div>
            <div class="col-md-4 callus text-center">
                <div class="col-md-4">
                    <ul>
                        <li><a href="#"><p>买家帮助</p></a></li>
                        <li><a href="#">新手指南</a></li>
                        <li><a href="#">服务保障</a></li>
                        <li><a href="#">常见问题</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <ul>
                        <li><a href="#"><p>商家帮助</p></a></li>
                        <li><a href="#">商家入驻</a></li>
                        <li><a href="#">商家后台</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <ul>
                        <li><a href="#"><p>关于我们</p></a></li>
                        <li><a href="#">关于达内</a></li>
                        <li><a href="#">联系我们</a></li>
                        <li>
                            <span class="fa fa-wechat"></span>
                            <span class="fa fa-weibo"></span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-md-4">
                <div class="col-md-5">
                    <p>学子商城客户端</p>
                    <img src="../images/index/ios.png" class="lf">
                    <img src="../images/index/android.png" alt="" class="lf"/>
                </div>
                <div class="col-md-6">
                    <img src="../images/index/erweima.png">
                </div>
            </div>
        </div>
        <!-- 页面底部-备案号 #footer -->
        <div class="col-md-12 text-center bottom">
            Copyright © 2018 Tedu.cn All Rights Reserved 京ICP备08000853号-56 <a target="_blank"
                                                                              href="http://www.tedu.cn/">达内时代科技集团有限公司</a>
            版权所有
        </div>
    </footer>
    <!--页脚结束-->
</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/element-ui/2.15.9/theme-chalk/index.css">

<script src="js/axios.min.js"></script>
<script src="js/vue.min.js"></script>
<script src="js/index.min.js"></script>
<script>
    var v = new Vue({
        el: "#app",
        data: {
            user:{username:"",
                password:""},
            rePassword:""
        },
        methods: {
            reg(){
                // 判断三个输入框是否优质
                // 当三个输入框中若是出现一个或多个数据是空的，则不进行提交
                if (this.user.username=="" || this.user.password=="" || this.rePassword==""){
                    this.$message({
                        showClose:true,
                        message:"请不要留有空文本框哦！",
                        type:"warning"
                    })
                    return;
                }
                // 判断两次输入的密码是否一致
                if (this.user.password != this.rePassword){
                    this.$message({
                        showClose:true,
                        message:"两次密码不一致，请重新输入！",
                        type:"error"
                    })
                    return;
                }
                axios.post("/user/reg",v.user).then(result => {
                    // 判断服务器返回的状态
                    let state = result.data;
                    if (state == 601){
                        this.$message({
                            showClose:true,
                            message:"用户名已被注册，请重新输入！",
                            type:"error"
                        })
                    }
                    if (state == 603){
                        this.$message({
                            showClose:true,
                            message:"当前访问人数过多，请稍后再试！",
                            type:"error"
                        })
                    }if (state == 602){
                        this.$confirm('注册成功，是否跳转到登录页?', '提示', {
                            confirmButtonText: '确定',
                            cancelButtonText: '取消',
                            type: 'warning'
                        }).then(() => {
                            // 若是点击确定，则跳转到登录页面
                            location.href = "login.html";
                        }).catch(() => {
                            // 若是点击取消，则3秒后跳转到登录页面
                            this.$message({
                                type: 'info',
                                message: '你想注册多少个账号？'
                            });
                            setTimeout(() => {
                                this.$message({
                                    type: 'info',
                                    message: '3秒后自动跳转至登录页面'
                                });
                            },1000)
                            // 设置定时器，3秒后自动跳转
                            setTimeout(() => {
                                location.href = "login.html";
                            },9000)
                        });
                    }

                })
            }
        }
    })
</script>
</body>

</html>